import{g as q,c as I}from"./pagination.min.js";function X(o){const{effect:r,swiper:e,on:f,setTranslate:d,setTransition:a,overwriteParams:p,perspective:l,recreateShadows:h,getEffectParams:t}=o;f("beforeInit",()=>{if(e.params.effect!==r)return;e.classNames.push(`${e.params.containerModifierClass}${r}`),l&&l()&&e.classNames.push(`${e.params.containerModifierClass}3d`);const c=p?p():{};Object.assign(e.params,c),Object.assign(e.originalParams,c)}),f("setTranslate",()=>{e.params.effect===r&&d()}),f("setTransition",(c,w)=>{e.params.effect===r&&a(w)}),f("transitionEnd",()=>{if(e.params.effect===r&&h){if(!t||!t().slideShadows)return;e.slides.forEach(c=>{c.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(w=>w.remove())}),h()}});let s;f("virtualUpdate",()=>{e.params.effect===r&&(e.slides.length||(s=!0),requestAnimationFrame(()=>{s&&e.slides&&e.slides.length&&(d(),s=!1)}))})}function Y(o,r){const e=q(r);return e!==r&&(e.style.backfaceVisibility="hidden",e.style["-webkit-backface-visibility"]="hidden"),e}function x(o,r,e){const f=`swiper-slide-shadow${e?`-${e}`:""}`,d=q(r);let a=d.querySelector(`.${f}`);return a||(a=I("div",`swiper-slide-shadow${e?`-${e}`:""}`),d.append(a)),a}function D({swiper:o,extendParams:r,on:e}){r({coverflowEffect:{rotate:50,stretch:0,depth:100,scale:1,modifier:1,slideShadows:!0}}),X({effect:"coverflow",swiper:o,on:e,setTranslate:()=>{const{width:a,height:p,slides:l,slidesSizesGrid:h}=o,t=o.params.coverflowEffect,s=o.isHorizontal(),c=o.translate,w=s?-c+a/2:-c+p/2,O=s?t.rotate:-t.rotate,C=t.depth;for(let u=0,z=l.length;u<z;u+=1){const n=l[u],y=h[u],A=n.swiperSlideOffset,P=(w-A-y/2)/y,i=typeof t.modifier=="function"?t.modifier(P):P*t.modifier;let E=s?O*i:0,S=s?0:O*i,$=-C*Math.abs(i),m=t.stretch;typeof m=="string"&&m.indexOf("%")!==-1&&(m=parseFloat(t.stretch)/100*y);let v=s?0:m*i,M=s?m*i:0,T=1-(1-t.scale)*Math.abs(i);Math.abs(M)<.001&&(M=0),Math.abs(v)<.001&&(v=0),Math.abs($)<.001&&($=0),Math.abs(E)<.001&&(E=0),Math.abs(S)<.001&&(S=0),Math.abs(T)<.001&&(T=0);const k=`translate3d(${M}px,${v}px,${$}px)  rotateX(${S}deg) rotateY(${E}deg) scale(${T})`,H=Y(t,n);if(H.style.transform=k,n.style.zIndex=-Math.abs(Math.round(i))+1,t.slideShadows){let g=s?n.querySelector(".swiper-slide-shadow-left"):n.querySelector(".swiper-slide-shadow-top"),b=s?n.querySelector(".swiper-slide-shadow-right"):n.querySelector(".swiper-slide-shadow-bottom");g||(g=x(t,n,s?"left":"top")),b||(b=x(t,n,s?"right":"bottom")),g&&(g.style.opacity=i>0?i:0),b&&(b.style.opacity=-i>0?-i:0)}}},setTransition:a=>{o.slides.map(l=>q(l)).forEach(l=>{l.style.transitionDuration=`${a}ms`,l.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(h=>{h.style.transitionDuration=`${a}ms`})})},perspective:()=>!0,overwriteParams:()=>({watchSlidesProgress:!0})})}export{D as E};
